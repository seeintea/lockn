# 家庭财务管理系统（单人全栈）工作安排表

> 假设：你一个人同时负责产品/前端/后端/部署；每周有效产出 20–30 小时（工作日 2–4 小时 + 周末 4–6 小时）。
>
> 如果你是全职（每周 35–45 小时），把下面“周”压缩为 1/2～2/3 即可。

## 0. 总体里程碑（建议 8 周 MVP + 4 周增强）

- [ ] W1：项目初始化 + 账号体系 + 基础权限骨架
- [ ] W2：分类/账户 + 流水核心模型（收支/转账）
- [ ] W3：流水列表/筛选/编辑 + 录入体验（快速记账）
- [ ] W4：预算（MVP）+ 首页概览（MVP）
- [ ] W5：报表中心（结构/趋势）+ 导出（CSV）
- [ ] W6：导入（CSV）+ 去重 + 导入回滚
- [ ] W7：成员协作（账本/成员/可见范围 MVP）+ 审计日志
- [ ] W8：联调、性能优化、异常处理、灰度发布、备份策略

增强（可选）

- [ ] W9–W10：资产/负债/净资产快照
- [ ] W11：对账中心（差异识别 + 处理）
- [ ] W12：定期交易 + 通知提醒

## 1. 排期表（按周拆解到任务）

### W1：初始化与基础骨架

**目标**：能登录、能创建账本、能跑通最小闭环（空数据也可）。

- [ ] 【产品】确认 MVP 范围与数据口径（收入/支出/转账）
- [ ] 【产品】定义权限模型：账本范围 + 接口权限点
- [ ] 【后端】初始化项目结构、环境变量、CI（build/lint）
- [ ] 【后端】实现用户登录/登出、Token 策略、Redis 缓存策略
- [ ] 【后端】实现家庭/账本表结构（最小字段）+ CRUD API
- [ ] 【前端】初始化工程、路由、状态管理、请求封装、错误提示
- [ ] 【前端】实现登录页 + 账本选择/创建页（最简）
- [ ] 【交付】可登录、可创建账本、进入空的“首页/流水页”

### W2：分类/账户与流水核心（后端优先）

**目标**：能录入一笔支出/收入/转账并存储。

- [ ] 【后端】实现分类（收入/支出）CRUD + 树结构支持
- [ ] 【后端】实现账户 CRUD + 转账（双记账或 transfer 模型）
- [ ] 【后端】实现流水核心模型（transaction，split 可延后）
- [ ] 【后端】实现流水查询：分页、时间区间、账户/分类过滤
- [ ] 【前端】实现分类管理页（简单树/列表）
- [ ] 【前端】实现账户管理页（列表 + 新增）
- [ ] 【前端】实现记一笔页面雏形（支出/收入/转账）
- [ ] 【交付】可以新增账户/分类，记一笔支出/收入/转账

### W3：流水列表与录入体验（前端优先）

**目标**：流水可用、体验达到“每天愿意用”。

- [ ] 【前端】实现流水列表：分页/下拉加载 + 筛选（时间、账户、分类、关键字）
- [ ] 【前端】实现流水编辑/删除 + 详情抽屉
- [ ] 【前端】实现快速录入：默认账户/最近分类记忆、快捷金额
- [ ] 【后端】补齐流水编辑/删除接口
- [ ] 【后端】优化搜索与过滤性能（索引、查询条件）
- [ ] 【交付】“记账 + 查账 + 改账”闭环顺畅

### W4：预算与首页概览（MVP）

**目标**：本月预算执行 + 收支结余一眼可见。

- [ ] 【后端】实现预算模型（按月 + 可选按分类）
- [ ] 【后端】实现首页聚合接口：本月收入/支出/结余、账户余额汇总
- [ ] 【前端】实现首页概览：关键指标卡片 + 预算进度条
- [ ] 【前端】实现预算设置页（总预算 + 分类预算可选）
- [ ] 【交付】首页可用，预算可设置并展示执行情况

### W5：报表中心 + 导出

**目标**：月度复盘可用，数据可导出备份。

- [ ] 【后端】实现分类结构报表（按月/按区间）
- [ ] 【后端】实现趋势报表（月度趋势）
- [ ] 【后端】实现导出 CSV（流水/按区间）
- [ ] 【前端】实现报表中心：结构图（饼/柱）+ 趋势图（折线）
- [ ] 【前端】实现导出入口（选择区间 -> 下载）
- [ ] 【交付】能看“花在哪”与“趋势”，能导出备份

### W6：导入（CSV）+ 去重 + 回滚

**目标**：从支付宝/微信/银行卡等导入一批流水，减少手工录入。

- [ ] 【后端】实现导入任务：上传 -> 解析预览 -> 确认入库
- [ ] 【后端】实现字段映射 + 分类映射
- [ ] 【后端】实现去重策略（hash/时间+金额+描述）+ 导入批次号
- [ ] 【后端】实现回滚：按批次删除导入数据
- [ ] 【前端】实现导入向导：上传 -> 预览 -> 映射 -> 确认
- [ ] 【前端】实现导入结果页：成功/失败/重复统计 + 支持回滚
- [ ] 【交付】可用的导入功能（至少支持 1 种常见 CSV 模板）

### W7：成员协作 + 可见范围（MVP）+ 审计日志

**目标**：家庭账本可共享协作且权限可控。

- [ ] 【后端】实现成员邀请/加入（邀请码或链接）
- [ ] 【后端】实现成员角色与范围（仅本人/全部/指定账户）
- [ ] 【后端】实现审计日志（关键写操作）
- [ ] 【前端】实现成员管理页（邀请、角色、范围设置）
- [ ] 【前端】实现审计日志页（列表）
- [ ] 【交付】家庭成员协作跑通，权限边界可靠

### W8：稳定性、联调、发布

**目标**：上线可用、可维护、可迭代。

- [ ] 【工程】整理端到端自测脚本与检查清单
- [ ] 【工程】接入错误监控与告警（可选：Sentry）
- [ ] 【工程】检查性能：关键接口耗时、索引
- [ ] 【部署】Docker 化、环境变量管理、备份（DB dump + 对象存储可选）
- [ ] 【部署】灰度/回滚方案（最简：保留上一版本镜像）
- [ ] 【交付】v1.0 可用版本上线

## 2. 单人日程模板（建议）

### 工作日（2–4 小时）

- [ ] 30min：看板/复盘（昨天完成/今天目标/阻塞）
- [ ] 90–150min：核心开发（优先“可交付闭环”）
- [ ] 30min：联调/修复/提交

### 周末（4–6 小时）

- [ ] 1h：补文档/补测试/重构（清债）
- [ ] 2–4h：完成一个可发布的功能块
- [ ] 30min：备份与发布演练（降低上线风险）

## 3. 依赖与关键路径（单人要特别注意）

- [ ] 关键路径：流水模型与查询（所有功能的地基）
- [ ] 关键路径：分类/账户（录入与报表口径）
- [ ] 关键路径：报表聚合（后端口径决定前端展示）
- [ ] 关键路径：导入（工程量大，尽早做最小版本）
- [ ] 关键路径：权限范围（协作上线前必须可靠）
- [ ] 风险点：导入模板差异大（先固定 1–2 个主流模板）
- [ ] 风险点：多币种复杂（MVP 单币种，后续加汇率折算）
- [ ] 风险点：权限过度设计（先做账本级 + 成员可见范围）

## 4. 交付清单（每周验收）

- [ ] 每周至少交付一个“可用闭环”（新增 -> 查询 -> 编辑/删除 -> 权限校验 -> 前端可操作）
- [ ] 每周发布一次（哪怕只是内测环境）
